C51 COMPILER V9.59.0.0   5110_51                                                           06/15/2024 01:13:03 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE 5110_51
OBJECT MODULE PLACED IN ..\..\hex\5110-51.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE 5110-51.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2) OBJE
                    -CT(..\..\hex\5110-51.obj)

line level    source

   1          #include <reg51.h>
   2          #include <nokia5110.h>
   3          #include "intrins.h"
   4          extern unsigned char g_ucTempbuf[20]; 
   5          unsigned char code shuzi_nokia[]={
   6          0xF8,0x04,0x04,0x04,0xF8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"0",0*/
   7          
   8          0x00,0x08,0xFC,0x00,0x00,0x00,0x00,0x02,0x03,0x02,0x00,0x00,/*"1",1*/
   9          
  10          0x18,0x84,0x44,0x24,0x18,0x00,0x03,0x02,0x02,0x02,0x02,0x00,/*"2",2*/
  11          
  12          0x08,0x04,0x24,0x24,0xD8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"3",3*/
  13          
  14          0x40,0xB0,0x88,0xFC,0x80,0x00,0x00,0x00,0x00,0x03,0x02,0x00,/*"4",4*/
  15          
  16          0x3C,0x24,0x24,0x24,0xC4,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"5",5*/
  17          
  18          0xF8,0x24,0x24,0x2C,0xC0,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"6",6*/
  19          
  20          0x0C,0x04,0xE4,0x1C,0x04,0x00,0x00,0x00,0x03,0x00,0x00,0x00,/*"7",7*/
  21          
  22          0xD8,0x24,0x24,0x24,0xD8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"8",8*/
  23          
  24          0x38,0x44,0x44,0x44,0xF8,0x00,0x00,0x03,0x02,0x02,0x01,0x00,/*"9",9*/
  25          
  26          0x00,0xE0,0x9C,0xF0,0x80,0x00,0x02,0x03,0x00,0x00,0x03,0x02,/*"A",10*/
  27          
  28          0x04,0xFC,0x24,0x24,0xD8,0x00,0x02,0x03,0x02,0x02,0x01,0x00,/*"B",11*/
  29          
  30          0xF8,0x04,0x04,0x04,0x0C,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"C",12*/
  31          
  32          0x04,0xFC,0x04,0x04,0xF8,0x00,0x02,0x03,0x02,0x02,0x01,0x00,/*"D",13*/
  33          
  34          0x04,0xFC,0x24,0x74,0x0C,0x00,0x02,0x03,0x02,0x02,0x03,0x00,/*"E",14*/
  35          
  36          0x04,0xFC,0x24,0x74,0x0C,0x00,0x02,0x03,0x02,0x00,0x00,0x00,/*"F",15*/
  37          
  38          
  39          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,/*".",16*/
  40          
  41          0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x00,0x00,/*":",17*/
  42          
  43          };
  44          
  45          
  46          unsigned char code hanzi[]={
  47          
  48          0x88,0x68,0xFF,0x48,0x88,0x22,0xF2,0x2A,0xE6,0x22,0xE0,0x00,
  49          0x00,0x00,0x0F,0x00,0x02,0x09,0x04,0x03,0x08,0x08,0x07,0x00,/*"杨",0*/
  50          
  51          0xAE,0xA8,0xAF,0xA8,0xEE,0x00,0xFE,0x02,0xFE,0x00,0x00,0x00,
  52          0x0F,0x08,0x04,0x04,0x0A,0x04,0x03,0x00,0x07,0x08,0x0E,0x00,/*"凯",1*/
  53          
  54          0xFC,0x46,0x45,0x44,0xFC,0x10,0x08,0x27,0xC4,0x04,0xFC,0x00,
C51 COMPILER V9.59.0.0   5110_51                                                           06/15/2024 01:13:03 PAGE 2   

  55          0x0F,0x04,0x04,0x04,0x0F,0x00,0x00,0x00,0x08,0x08,0x07,0x00,/*"的",2*/
  56          
  57          0xFF,0x21,0x29,0x2D,0x57,0x55,0x95,0x2D,0x21,0x21,0xFF,0x00,
  58          0x0F,0x04,0x04,0x05,0x05,0x06,0x06,0x04,0x04,0x04,0x0F,0x00,/*"图",3*/
  59          
  60          0x40,0x44,0x44,0x44,0xFF,0x44,0x44,0x44,0x7D,0x42,0xC0,0x00,
  61          0x00,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x04,0x04,0x03,0x00,/*"书",4*/
  62          
  63          0x08,0xE7,0x0C,0x00,0x0C,0xF4,0x54,0x55,0x56,0x74,0x0C,0x00,
  64          0x00,0x0F,0x04,0x00,0x00,0x0F,0x05,0x05,0x05,0x05,0x0F,0x00,/*"馆",5*/
  65          
  66          0x82,0x82,0xBA,0xAA,0xAA,0xAB,0xAA,0xAA,0xBA,0x82,0x82,0x00,
  67          0x0F,0x00,0x00,0x0E,0x0A,0x0A,0x0A,0x0E,0x00,0x08,0x0F,0x00,/*"高",6*/
  68          
  69          0x44,0x53,0x52,0x56,0x52,0x7C,0x53,0xD2,0x56,0x52,0x42,0x00,
  70          0x01,0x01,0x03,0x05,0x01,0x09,0x09,0x0F,0x01,0x01,0x01,0x00,/*"等",7*/
  71          
  72          0x48,0x2A,0x98,0x7F,0x28,0x4A,0x10,0xEF,0x08,0xF8,0x08,0x00,
  73          0x09,0x0B,0x05,0x05,0x0B,0x00,0x08,0x05,0x02,0x05,0x08,0x00,/*"数",8*/
  74          
  75          0x8C,0x85,0x96,0x94,0x95,0x96,0xD4,0xB4,0x96,0x85,0x8C,0x00,
  76          0x00,0x00,0x00,0x08,0x08,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,/*"学",9*/
  77          
  78          0x98,0xD4,0xB3,0x88,0x00,0x48,0x48,0xFF,0x24,0xA5,0x26,0x00,
  79          0x04,0x04,0x02,0x02,0x08,0x08,0x04,0x03,0x05,0x08,0x0E,0x00,/*"线",10*/
  80          
  81          0x78,0x00,0xFF,0x08,0x20,0x9C,0x88,0xFF,0x88,0x88,0x00,0x00,
  82          0x00,0x00,0x0F,0x00,0x08,0x08,0x08,0x0F,0x08,0x08,0x08,0x00,/*"性",11*/
  83          
  84          0x20,0x10,0xFC,0x03,0x10,0x10,0xFF,0x10,0x09,0x0A,0x08,0x00,
  85          0x00,0x00,0x0F,0x00,0x00,0x00,0x00,0x01,0x02,0x04,0x0F,0x00,/*"代",12*/
  86          
  87          0x48,0x2A,0x98,0x7F,0x28,0x4A,0x10,0xEF,0x08,0xF8,0x08,0x00,
  88          0x09,0x0B,0x05,0x05,0x0B,0x00,0x08,0x05,0x02,0x05,0x08,0x00,/*"数",13*/
  89          
  90          0x04,0x88,0xFF,0x00,0x10,0x10,0xD0,0x3F,0xD0,0x12,0x14,0x00,
  91          0x01,0x00,0x0F,0x00,0x08,0x06,0x01,0x00,0x01,0x06,0x08,0x00,/*"状",14*/
  92          
  93          0x44,0x44,0x24,0x14,0x0C,0xA7,0x4C,0x14,0x24,0x44,0x44,0x00,
  94          0x04,0x03,0x00,0x07,0x08,0x08,0x0B,0x08,0x0C,0x01,0x06,0x00,/*"态",15*/
  95          
  96          0x00,0xF2,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x7E,0x00,0x00,
  97          0x00,0x07,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x0E,0x00,/*"已",16*/
  98          
  99          0x10,0xFC,0x03,0x10,0xD4,0x5F,0x54,0x54,0x5F,0xD4,0x10,0x00,
 100          0x00,0x0F,0x00,0x00,0x0F,0x05,0x05,0x05,0x05,0x0F,0x00,0x00,/*"借",17*/
 101          
 102          0xF9,0x02,0xF0,0x95,0x99,0x91,0x99,0x95,0xF1,0x01,0xFF,0x00,
 103          0x0F,0x00,0x04,0x02,0x01,0x00,0x03,0x04,0x06,0x08,0x0F,0x00,/*"阅",18*/
 104          
 105          0x20,0x24,0x24,0xA4,0x64,0xFF,0x64,0xA4,0x24,0x24,0x20,0x00,
 106          0x02,0x02,0x01,0x00,0x00,0x0F,0x00,0x00,0x01,0x02,0x02,0x00,/*"未",19*/
 107          
 108          0x88,0x68,0xFF,0x48,0x02,0xFA,0xAF,0xAA,0xAF,0xFA,0x02,0x00,
 109          0x00,0x00,0x0F,0x00,0x0A,0x0A,0x06,0x03,0x06,0x0A,0x0A,0x00,/*"模",20*/
 110          
 111          0x08,0x48,0x48,0xC8,0x48,0x48,0x08,0xFF,0x08,0x09,0x0A,0x00,
 112          0x08,0x08,0x08,0x07,0x04,0x04,0x04,0x00,0x03,0x04,0x0E,0x00,/*"式",21*/
 113          
 114          0x40,0x44,0x44,0x44,0xFF,0x44,0x44,0x44,0x7D,0x42,0xC0,0x00,
 115          0x00,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x04,0x04,0x03,0x00,/*"书",22*/
 116          
C51 COMPILER V9.59.0.0   5110_51                                                           06/15/2024 01:13:03 PAGE 3   

 117          0x12,0x12,0xEA,0xA6,0xA2,0xBF,0xA2,0xA6,0xEA,0x12,0x12,0x00,
 118          0x08,0x08,0x0B,0x0A,0x0A,0x0A,0x0A,0x0A,0x0B,0x08,0x08,0x00,/*"查",23*/
 119          
 120          0x11,0xF2,0x08,0x04,0xFB,0x4A,0x4A,0x4A,0xFA,0x02,0xFE,0x00,
 121          0x00,0x07,0x02,0x00,0x07,0x02,0x02,0x02,0x0B,0x08,0x07,0x00,/*"询",24*/
 122          
 123          
 124          0xFC,0x00,0x00,0xFF,0x00,0x02,0x22,0x22,0x22,0x22,0xFE,0x00,
 125          0x01,0x08,0x06,0x01,0x00,0x04,0x04,0x04,0x04,0x04,0x0F,0x00,/*"归",25*/
 126          
 127          0x10,0x11,0xF2,0x00,0x42,0x22,0x12,0xFA,0x06,0x12,0x62,0x00,
 128          0x08,0x04,0x03,0x04,0x08,0x08,0x08,0x0B,0x08,0x08,0x08,0x00,/*"还",26*/
 129          
 130          };
 131          
 132          void delayms(unsigned  int ii)//1ms延时函数
 133          {
 134   1        unsigned int i,x;
 135   1        for (x=0;x<ii;x++)
 136   1        {
 137   2        for (i=0;i<200;i++);
 138   2        }
 139   1      ;
 140   1      }
 141          
 142          /*--------------------------------------------
 143          LCD_write_byte: 使用SPI接口写数据到LCD
 144          输入参数：dt：写入的数据；
 145          command ：写数据/命令选择；
 146          编写日期：20080918 
 147          ----------------------------------------------*/
 148          void LCD_write_byte(unsigned char dt, unsigned char command)
 149          {
 150   1        unsigned char i; 
 151   1        sce=0;  
 152   1        dc=command; 
 153   1        for(i=0;i<8;i++)
 154   1        { 
 155   2          if(dt&0x80)
 156   2          sdin=1; 
 157   2          else
 158   2            sdin=0;
 159   2          dt=dt<<1;   
 160   2          sclk=0;     
 161   2          sclk=1; 
 162   2        } 
 163   1        dc=1; 
 164   1        sce=1;  
 165   1        sdin=1;
 166   1      }
 167          /*---------------------------------------
 168          LCD_init: 3310LCD初始化
 169          编写日期：20080918 
 170          -----------------------------------------  */
 171          void LCD_init(void)
 172          {
 173   1        res=0;    
 174   1          delayms(10);
 175   1          res=1;  
 176   1        LCD_write_byte(0x21,0);//初始化Lcd,功能设定使用扩充指令
 177   1        LCD_write_byte(0xCD,0);//设定液晶偏置电压
 178   1        LCD_write_byte(0x20,0);//使用基本指令
C51 COMPILER V9.59.0.0   5110_51                                                           06/15/2024 01:13:03 PAGE 4   

 179   1        LCD_write_byte(0x0C,0);//设定显示模式，正常显示,普通显示
 180   1      }
 181          /*-------------------------------------------
 182          LCD_set_XY: 设置LCD坐标函数
 183          输入参数：X：0－83  Y：0－5
 184          编写日期：20080918 
 185          ---------------------------------------------*/
 186          void LCD_set_XY(unsigned char X, unsigned char Y)
 187          {
 188   1        LCD_write_byte(0x40 | Y, 0);// column设置y地址命令字
 189   1        LCD_write_byte(0x80 | X, 0);// row设置x地址命令字
 190   1      } 
 191          /*------------------------------------------
 192          LCD_clear: LCD清屏函数
 193          编写日期：20080918 
 194          --------------------------------------------*/
 195          void LCD_clear(void)
 196          {
 197   1        unsigned char t;
 198   1        unsigned char k;
 199   1        LCD_set_XY(0,0);
 200   1        for(t=0;t<6;t++)
 201   1        { 
 202   2          for(k=0;k<84;k++)
 203   2          { 
 204   3            LCD_write_byte(0x00,1);
 205   3              
 206   3          } 
 207   2        }
 208   1      }
 209          /*---------------------------------------------
 210          LCD_write_shu: 显示6（宽）*16（高）点阵列数字字母符号等半角类
 211          输入参数：c：显示的字符；
 212          编写日期：20080918 
 213          -----------------------------------------------*/
 214          void LCD_write_shu(unsigned char row, unsigned char page,unsigned char c) //row:列 page:页 dd:字符
 215          {
 216   1        unsigned char i;    
 217   1        
 218   1        LCD_set_XY(row*6, page);// 列，页 
 219   1        for(i=0; i<6;i++) 
 220   1        {
 221   2          LCD_write_byte(shuzi_nokia[c*12+i],1); 
 222   2        }
 223   1        
 224   1          LCD_set_XY(row*6, page+1);// 列，页 
 225   1        for(i=6; i<12;i++) 
 226   1        {
 227   2          LCD_write_byte(shuzi_nokia[c*12+i],1);
 228   2        }   
 229   1      }
 230          /*---------------------------------------------
 231          LCD_write_hanzi: 显示12（宽）*16（高）点阵列汉字等半角类
 232          输入参数：c：显示的字符；
 233          编写日期：20080918 
 234          -----------------------------------------------*/
 235          void LCD_write_hanzi(unsigned char row, unsigned char page,unsigned char c) //row:列 page:页 dd:字符
 236          {
 237   1        unsigned char i;    
 238   1        
 239   1        LCD_set_XY(row*6, page);// 列，页 
 240   1        for(i=0; i<12;i++) 
C51 COMPILER V9.59.0.0   5110_51                                                           06/15/2024 01:13:03 PAGE 5   

 241   1        {
 242   2          LCD_write_byte(hanzi[c*24+i],1); 
 243   2        }
 244   1        
 245   1          LCD_set_XY(row*6, page+1);// 列，页 
 246   1        for(i=12; i<24;i++) 
 247   1        {
 248   2          LCD_write_byte(hanzi[c*24+i],1);
 249   2        } 
 250   1      }
 251          
 252          void display_type()//寻到卡后显示出该卡的类型
 253          {
 254   1          unsigned char first,second;
 255   1          LCD_clear(); //清屏幕       
 256   1          LCD_write_hanzi(0,0,19);    
 257   1        LCD_write_hanzi(2,0,20);  
 258   1        LCD_write_hanzi(4,0,21);    
 259   1        LCD_write_hanzi(6,0,22);
 260   1      
 261   1          first=(g_ucTempbuf[0]&0xf0)>>4;
 262   1        LCD_write_shu(8,0,first);//写数字
 263   1          second=g_ucTempbuf[0]&0x0f;
 264   1        LCD_write_shu(9,0,second);//写数字
 265   1          first=(g_ucTempbuf[1]&0xf0)>>4;
 266   1        LCD_write_shu(10,0,first);//写数字
 267   1          second=g_ucTempbuf[1]&0x0f;
 268   1        LCD_write_shu(11,0,second);//写数字
 269   1      }
 270          
 271          void display_cardnum()
 272          {
 273   1        unsigned char first,second;
 274   1          LCD_write_hanzi(0,2,19);  
 275   1        LCD_write_hanzi(2,2,23);  
 276   1          LCD_write_shu(4,2,17); 
 277   1        
 278   1        first=(g_ucTempbuf[0]&0xf0)>>4;
 279   1        LCD_write_shu(5,2,first);//写数字
 280   1          second=g_ucTempbuf[0]&0x0f;
 281   1        LCD_write_shu(6,2,second);//写数字
 282   1      
 283   1          first=(g_ucTempbuf[1]&0xf0)>>4;
 284   1        LCD_write_shu(7,2,first);//写数字
 285   1          second=g_ucTempbuf[1]&0x0f;
 286   1        LCD_write_shu(8,2,second);//写数字
 287   1          
 288   1          first=(g_ucTempbuf[2]&0xf0)>>4;
 289   1        LCD_write_shu(9,2,first);//写数字
 290   1          second=g_ucTempbuf[2]&0x0f;
 291   1        LCD_write_shu(10,2,second);//写数字
 292   1      
 293   1          first=(g_ucTempbuf[3]&0xf0)>>4;
 294   1        LCD_write_shu(11,2,first);//写数字
 295   1          second=g_ucTempbuf[3]&0x0f;
 296   1        LCD_write_shu(12,2,second);//写数字
 297   1      }
 298          void display_carddat()    //余额
 299          {
 300   1        unsigned char first,second,num,i,yule[3];
 301   1      
 302   1          LCD_write_hanzi(0,4,24);  
C51 COMPILER V9.59.0.0   5110_51                                                           06/15/2024 01:13:03 PAGE 6   

 303   1        LCD_write_hanzi(2,4,25);  
 304   1          LCD_write_shu(4,4,17); 
 305   1      
 306   1          first=(g_ucTempbuf[3]&0xf0)>>4;
 307   1        //LCD_write_shu(7,4,first);//写数字
 308   1          second=g_ucTempbuf[3]&0x0f;
 309   1        //LCD_write_shu(8,4,second);//写数字
 310   1          
 311   1          num=first*16+second;        //十进制显示
 312   1          yule[0]=num/100;
 313   1          yule[1]=num%100/10;
 314   1          yule[2]=num%10;
 315   1          for(i=0;i<3;i++) 
 316   1          LCD_write_shu(7+i,4,yule[i]);//写数字
 317   1      
 318   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    732    ----
   CONSTANT SIZE    =    864    ----
   XDATA SIZE       =   ----       4
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
