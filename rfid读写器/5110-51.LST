C51 COMPILER V9.59.0.0   5110_51                                                           06/27/2024 13:24:14 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE 5110_51
OBJECT MODULE PLACED IN ..\..\hex\5110-51.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE 5110-51.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2) OBJE
                    -CT(..\..\hex\5110-51.obj)

line level    source

   1          #include <reg51.h>
   2          #include <nokia5110.h>
   3          #include "intrins.h"
   4          extern unsigned char g_ucTempbuf[20]; 
   5          unsigned char code shuzi_nokia[]={
   6          0xF8,0x04,0x04,0x04,0xF8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"0",0*/
   7          
   8          0x00,0x08,0xFC,0x00,0x00,0x00,0x00,0x02,0x03,0x02,0x00,0x00,/*"1",1*/
   9          
  10          0x18,0x84,0x44,0x24,0x18,0x00,0x03,0x02,0x02,0x02,0x02,0x00,/*"2",2*/
  11          
  12          0x08,0x04,0x24,0x24,0xD8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"3",3*/
  13          
  14          0xC0,0xA0,0x98,0xFC,0x80,0x00,0x00,0x00,0x02,0x03,0x02,0x00,/*"4",4*/
  15          
  16          0x7C,0x24,0x24,0x24,0xC4,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"5",5*/
  17          
  18          0xF0,0x48,0x24,0x24,0xC8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"6",6*/
  19          
  20          0x00,0x04,0xC4,0x34,0x0C,0x00,0x00,0x00,0x03,0x00,0x00,0x00,/*"7",7*/
  21          
  22          0xD8,0x24,0x24,0x24,0xD8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"8",8*/
  23          
  24          0x38,0x44,0x44,0x24,0xF8,0x00,0x01,0x02,0x02,0x01,0x00,0x00,/*"9",9*/
  25          
  26          0x00,0xE0,0x9C,0xF0,0x80,0x00,0x02,0x03,0x00,0x00,0x03,0x02,/*"A",10*/
  27          
  28          0x04,0xFC,0x24,0x24,0xD8,0x00,0x02,0x03,0x02,0x02,0x01,0x00,/*"B",11*/
  29          
  30          0xF8,0x04,0x04,0x04,0x0C,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"C",12*/
  31          
  32          0x04,0xFC,0x04,0x04,0xF8,0x00,0x02,0x03,0x02,0x02,0x01,0x00,/*"D",13*/
  33          
  34          0x04,0xFC,0x24,0x74,0x0C,0x00,0x02,0x03,0x02,0x02,0x03,0x00,/*"E",14*/
  35          
  36          0x04,0xFC,0x24,0x74,0x0C,0x00,0x02,0x03,0x02,0x00,0x00,0x00,/*"F",15*/
  37          
  38          0xF0,0x08,0x04,0x44,0xCC,0x40,0x00,0x01,0x02,0x02,0x01,0x00,/*"G",16*/
  39          
  40          0x04,0xFC,0x20,0x20,0xFC,0x04,0x02,0x03,0x00,0x00,0x03,0x02,/*"H",17*/
  41          
  42          0x04,0x04,0xFC,0x04,0x04,0x00,0x02,0x02,0x03,0x02,0x02,0x00,/*"I",18*/
  43          
  44          0x00,0x04,0x04,0xFC,0x04,0x04,0x0C,0x08,0x08,0x07,0x00,0x00,/*"J",19*/
  45          
  46          0x04,0xFC,0x24,0x50,0x8C,0x04,0x02,0x03,0x02,0x00,0x03,0x02,/*"K",20*/
  47          
  48          0x04,0xFC,0x04,0x00,0x00,0x00,0x02,0x03,0x02,0x02,0x02,0x03,/*"L",21*/
  49          
  50          0xFC,0x3C,0xC0,0x3C,0xFC,0x04,0x03,0x00,0x03,0x00,0x03,0x02,/*"M",22*/
  51          
  52          0x04,0xFC,0x30,0xC4,0xFC,0x04,0x02,0x03,0x02,0x00,0x03,0x00,/*"N",23*/
  53          
  54          0xF8,0x04,0x04,0x04,0xF8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"O",24*/
C51 COMPILER V9.59.0.0   5110_51                                                           06/27/2024 13:24:14 PAGE 2   

  55          
  56          0x04,0xFC,0x24,0x24,0x18,0x00,0x02,0x03,0x02,0x00,0x00,0x00,/*"P",25*/
  57          
  58          0xF8,0x84,0x84,0x04,0xF8,0x00,0x01,0x02,0x02,0x07,0x05,0x00,/*"Q",26*/
  59          
  60          0x04,0xFC,0x24,0x64,0x98,0x00,0x02,0x03,0x02,0x00,0x03,0x02,/*"R",27*/
  61          
  62          0x18,0x24,0x24,0x44,0x8C,0x00,0x03,0x02,0x02,0x02,0x01,0x00,/*"S",28*/
  63          
  64          0x0C,0x04,0xFC,0x04,0x0C,0x00,0x00,0x02,0x03,0x02,0x00,0x00,/*"T",29*/
  65          
  66          0x04,0xFC,0x00,0x00,0xFC,0x04,0x00,0x01,0x02,0x02,0x01,0x00,/*"U",30*/
  67          
  68          0x04,0x7C,0x80,0xE0,0x1C,0x04,0x00,0x00,0x03,0x00,0x00,0x00,/*"V",31*/
  69          
  70          0x3C,0xC0,0x7C,0xC0,0x3C,0x00,0x00,0x03,0x00,0x03,0x00,0x00,/*"W",32*/
  71          
  72          0x04,0x9C,0x60,0x9C,0x04,0x00,0x02,0x03,0x00,0x03,0x02,0x00,/*"X",33*/
  73          
  74          0x04,0x3C,0xC0,0x3C,0x04,0x00,0x00,0x02,0x03,0x02,0x00,0x00,/*"Y",34*/
  75          
  76          0x0C,0x84,0x64,0x1C,0x04,0x00,0x02,0x03,0x02,0x02,0x03,0x00,/*"Z",35*/
  77          
  78          0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x00,0x00,/*":",36*/
  79          
  80          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*" ",37*/
  81          
  82          };
  83          
  84          
  85          
  86          unsigned char code hanzi[]={
  87          
  88          
  89          0x10,0x14,0x94,0xD4,0x7F,0x54,0x5C,0x54,0x52,0x50,0x10,0x00,
  90          0x02,0x01,0x00,0x01,0x01,0x01,0x01,0x09,0x09,0x07,0x00,0x00,/*"考",0*/
  91          
  92          0xE2,0xAF,0xFA,0xAF,0xE2,0x00,0x08,0xFF,0x08,0x08,0xF8,0x00,
  93          0x0A,0x0A,0x0F,0x0A,0x0A,0x08,0x06,0x01,0x08,0x08,0x07,0x00,/*"勤",1*/
  94          
  95          0x00,0x82,0x92,0xDA,0xD6,0xB2,0xB1,0x91,0x89,0xC1,0x80,0x00,
  96          0x08,0x04,0x02,0x00,0x08,0x0F,0x00,0x00,0x02,0x04,0x09,0x00,/*"系",2*/
  97          
  98          0x98,0xD4,0xB3,0x88,0x00,0x64,0xD4,0x4D,0xC6,0x54,0xE4,0x00,
  99          0x04,0x04,0x02,0x02,0x08,0x04,0x03,0x00,0x07,0x08,0x0C,0x00,/*"统",3*/
 100          
 101          0x88,0x88,0xFF,0x48,0x48,0x02,0x02,0x02,0xFE,0x02,0x02,0x00,
 102          0x00,0x08,0x0F,0x00,0x00,0x00,0x08,0x08,0x0F,0x00,0x00,0x00,/*"打",4*/
 103          
 104          0x20,0x20,0x20,0x20,0xFF,0xA4,0xA4,0x24,0x24,0x24,0x20,0x00,
 105          0x00,0x00,0x00,0x00,0x0F,0x00,0x00,0x01,0x01,0x02,0x00,0x00,/*"卡",5*/
 106          
 107          0x00,0xFC,0x24,0x24,0xE4,0x04,0xFF,0x04,0x85,0x66,0x04,0x00,
 108          0x08,0x07,0x00,0x02,0x0B,0x04,0x02,0x01,0x02,0x04,0x0F,0x00,/*"成",6*/
 109          
 110          0x04,0x04,0xFC,0x04,0x04,0x08,0xFF,0x08,0x08,0x08,0xF8,0x00,
 111          0x02,0x02,0x01,0x09,0x05,0x03,0x00,0x00,0x08,0x08,0x07,0x00,/*"功",7*/
 112          
 113          0x8C,0x85,0x96,0x94,0x95,0x96,0xD4,0xB4,0x96,0x85,0x8C,0x00,
 114          0x00,0x00,0x00,0x08,0x08,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,/*"学",8*/
 115          
 116          0x20,0x20,0xAF,0x69,0x29,0x29,0x29,0x29,0x2F,0x20,0x20,0x00,
C51 COMPILER V9.59.0.0   5110_51                                                           06/27/2024 13:24:14 PAGE 3   

 117          0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x09,0x09,0x07,0x00,0x00,/*"号",9*/
 118          
 119          0xDC,0xB3,0x88,0x00,0x24,0xFF,0x24,0x00,0xFE,0x32,0xCE,0x00,
 120          0x04,0x04,0x02,0x08,0x05,0x03,0x01,0x00,0x0F,0x02,0x01,0x00,/*"绑",10*/
 121          
 122          0x2C,0x24,0xA4,0x24,0x25,0xE6,0x24,0x24,0x24,0x24,0x2C,0x00,
 123          0x08,0x04,0x03,0x04,0x08,0x0F,0x09,0x09,0x09,0x09,0x08,0x00,/*"定",11*/
 124          
 125          
 126          0x02,0x02,0x82,0x42,0x22,0xF2,0x0E,0x22,0x42,0x82,0x02,0x00,
 127          0x01,0x01,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x00,0x01,0x00,/*"不",12*/
 128          
 129          0x84,0x44,0xE4,0x1C,0x07,0x84,0x84,0xF4,0x84,0x84,0x04,0x00,
 130          0x00,0x00,0x0F,0x00,0x08,0x08,0x08,0x0F,0x08,0x08,0x08,0x00,/*"在",13*/
 131          
 132          0xFE,0x22,0x22,0xFE,0x00,0x08,0x48,0x88,0x08,0xFF,0x08,0x00,
 133          0x07,0x02,0x02,0x07,0x00,0x00,0x00,0x09,0x08,0x0F,0x00,0x00,/*"时",14*/
 134          
 135          0x00,0xF9,0x02,0xF8,0x49,0x49,0x49,0x49,0xF9,0x01,0xFF,0x00,
 136          0x00,0x0F,0x00,0x03,0x02,0x02,0x02,0x02,0x0B,0x08,0x0F,0x00,/*"间",15*/
 137          
 138          0xA0,0x90,0x8E,0x88,0x88,0xFF,0x88,0x88,0x88,0x80,0x80,0x00,
 139          0x08,0x08,0x04,0x02,0x01,0x00,0x01,0x02,0x04,0x08,0x08,0x00,/*"失",16*/
 140          
 141          0xFE,0x02,0xFA,0x02,0xFE,0x10,0xEC,0x0B,0x08,0xF8,0x08,0x00,
 142          0x09,0x04,0x03,0x04,0x09,0x08,0x05,0x02,0x05,0x08,0x08,0x00,/*"败",17*/
 143          
 144          0x04,0x04,0x84,0x64,0x14,0xFF,0x14,0x64,0x84,0x04,0x04,0x00,
 145          0x02,0x01,0x02,0x02,0x02,0x0F,0x02,0x02,0x02,0x01,0x02,0x00,/*"本",18*/
 146          
 147          0x00,0xFE,0x2A,0xA9,0x00,0x28,0xE7,0x21,0x21,0xEF,0x08,0x00,
 148          0x02,0x0F,0x01,0x00,0x08,0x08,0x05,0x02,0x05,0x08,0x08,0x00,/*"段",19*/
 149          
 150          0x20,0x22,0x22,0x22,0xE2,0x3E,0xE2,0x22,0x22,0x22,0x20,0x00,
 151          0x08,0x04,0x02,0x01,0x00,0x00,0x07,0x08,0x08,0x08,0x0E,0x00,/*"无",20*/
 152          
 153          0x11,0xF2,0x40,0x5F,0x55,0x55,0xFF,0x55,0x55,0x5F,0x40,0x00,
 154          0x00,0x07,0x02,0x04,0x02,0x01,0x0F,0x01,0x02,0x04,0x04,0x00,/*"课",21*/
 155          
 156          0x24,0x24,0x24,0x2F,0xE4,0x24,0x24,0x2F,0x24,0xE4,0x04,0x00,
 157          0x00,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x02,0x03,0x00,0x00,/*"节",22*/
 158          
 159          0x00,0xF2,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x7E,0x00,0x00,
 160          0x00,0x07,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x0E,0x00,/*"已",23*/
 161          
 162          0x04,0x88,0xFF,0x00,0x10,0x10,0xD0,0x3F,0xD0,0x12,0x14,0x00,
 163          0x01,0x00,0x0F,0x00,0x08,0x06,0x01,0x00,0x01,0x06,0x08,0x00,/*"状",24*/
 164          
 165          0x44,0x44,0x24,0x14,0x0C,0xA7,0x4C,0x14,0x24,0x44,0x44,0x00,
 166          0x04,0x03,0x00,0x07,0x08,0x08,0x0B,0x08,0x0C,0x01,0x06,0x00,/*"态",25*/
 167          
 168          0x00,0x02,0xE2,0x02,0x02,0xFE,0x42,0x42,0x42,0x42,0x00,0x00,
 169          0x08,0x08,0x0F,0x08,0x08,0x0F,0x08,0x08,0x08,0x08,0x08,0x00,/*"正",26*/
 170          
 171          0x0C,0x04,0x75,0x56,0x54,0xD7,0x54,0x56,0x75,0x04,0x0C,0x00,
 172          0x00,0x07,0x01,0x01,0x01,0x0F,0x01,0x01,0x05,0x07,0x00,0x00,/*"常",27*/
 173          
 174          0x10,0x11,0xF2,0x00,0x00,0xFF,0x11,0x11,0x31,0xD1,0x1F,0x00,
 175          0x08,0x04,0x03,0x04,0x0A,0x09,0x08,0x08,0x08,0x08,0x0B,0x00,/*"迟",28*/
 176          
 177          0x92,0x9A,0x96,0xF2,0x92,0x9A,0xB2,0x00,0xFC,0x00,0xFF,0x00,
 178          0x08,0x08,0x08,0x07,0x04,0x04,0x04,0x00,0x01,0x08,0x0F,0x00,/*"到",29*/
C51 COMPILER V9.59.0.0   5110_51                                                           06/27/2024 13:24:14 PAGE 4   

 179          
 180          0xA4,0x23,0xFE,0x22,0xA2,0x44,0x44,0xFF,0x44,0x7C,0x40,0x00,
 181          0x07,0x04,0x03,0x02,0x0F,0x04,0x03,0x00,0x03,0x04,0x08,0x00,/*"缺",30*/
 182          
 183          0x88,0x68,0xFF,0x48,0x02,0xFA,0xAF,0xAA,0xAF,0xFA,0x02,0x00,
 184          0x00,0x00,0x0F,0x00,0x0A,0x0A,0x06,0x03,0x06,0x0A,0x0A,0x00,/*"模",31*/
 185          
 186          0x08,0x48,0x48,0xC8,0x48,0x48,0x08,0xFF,0x08,0x09,0x0A,0x00,
 187          0x08,0x08,0x08,0x07,0x04,0x04,0x04,0x00,0x03,0x04,0x0E,0x00,/*"式",32*/
 188          
 189          
 190          0x10,0x10,0xFF,0x10,0x20,0xFC,0x10,0xFF,0x08,0x84,0xFC,0x00,
 191          0x04,0x04,0x03,0x02,0x00,0x07,0x08,0x09,0x08,0x08,0x0E,0x00,/*"地",33*/
 192          
 193          0x00,0xF0,0x10,0x10,0x10,0x1F,0x12,0x12,0x12,0xF2,0x02,0x00,
 194          0x08,0x05,0x01,0x05,0x09,0x01,0x05,0x09,0x01,0x05,0x08,0x00,/*"点",34*/
 195          
 196          
 197          };
 198          
 199          void delayms(unsigned  int ii)//1ms延时函数
 200          {
 201   1        unsigned int i,x;
 202   1        for (x=0;x<ii;x++)
 203   1        {
 204   2        for (i=0;i<200;i++);
 205   2        }
 206   1      ;
 207   1      }
 208          
 209          /*--------------------------------------------
 210          LCD_write_byte: 使用SPI接口写数据到LCD
 211          输入参数：dt：写入的数据；
 212          command ：写数据/命令选择；
 213          编写日期：20080918 
 214          ----------------------------------------------*/
 215          void LCD_write_byte(unsigned char dt, unsigned char command)
 216          {
 217   1        unsigned char i; 
 218   1        sce=0;  
 219   1        dc=command; 
 220   1        for(i=0;i<8;i++)
 221   1        { 
 222   2          if(dt&0x80)
 223   2          sdin=1; 
 224   2          else
 225   2            sdin=0;
 226   2          dt=dt<<1;   
 227   2          sclk=0;     
 228   2          sclk=1; 
 229   2        } 
 230   1        dc=1; 
 231   1        sce=1;  
 232   1        sdin=1;
 233   1      }
 234          /*---------------------------------------
 235          LCD_init: 3310LCD初始化
 236          编写日期：20080918 
 237          -----------------------------------------  */
 238          void LCD_init(void)
 239          {
 240   1        res=0;    
C51 COMPILER V9.59.0.0   5110_51                                                           06/27/2024 13:24:14 PAGE 5   

 241   1          delayms(10);
 242   1          res=1;  
 243   1        LCD_write_byte(0x21,0);//初始化Lcd,功能设定使用扩充指令
 244   1        LCD_write_byte(0xCD,0);//设定液晶偏置电压
 245   1        LCD_write_byte(0x20,0);//使用基本指令
 246   1        LCD_write_byte(0x0C,0);//设定显示模式，正常显示,普通显示
 247   1      }
 248          /*-------------------------------------------
 249          LCD_set_XY: 设置LCD坐标函数
 250          输入参数：X：0－83  Y：0－5
 251          编写日期：20080918 
 252          ---------------------------------------------*/
 253          void LCD_set_XY(unsigned char X, unsigned char Y)
 254          {
 255   1        LCD_write_byte(0x40 | Y, 0);// column设置y地址命令字
 256   1        LCD_write_byte(0x80 | X, 0);// row设置x地址命令字
 257   1      } 
 258          /*------------------------------------------
 259          LCD_clear: LCD清屏函数
 260          编写日期：20080918 
 261          --------------------------------------------*/
 262          void LCD_clear(void)
 263          {
 264   1        unsigned char t;
 265   1        unsigned char k;
 266   1        LCD_set_XY(0,0);
 267   1        for(t=0;t<6;t++)
 268   1        { 
 269   2          for(k=0;k<84;k++)
 270   2          { 
 271   3            LCD_write_byte(0x00,1);
 272   3              
 273   3          } 
 274   2        }
 275   1      }
 276          /*---------------------------------------------
 277          LCD_write_shu: 显示6（宽）*16（高）点阵列数字字母符号等半角类
 278          输入参数：c：显示的字符；
 279          编写日期：20080918 
 280          -----------------------------------------------*/
 281          void LCD_write_shu(unsigned char row, unsigned char page,unsigned char c) //row:列 page:页 dd:字符
 282          {
 283   1        unsigned char i;    
 284   1        
 285   1        LCD_set_XY(row*6, page);// 列，页 
 286   1        for(i=0; i<6;i++) 
 287   1        {
 288   2          LCD_write_byte(shuzi_nokia[c*12+i],1); 
 289   2        }
 290   1        
 291   1          LCD_set_XY(row*6, page+1);// 列，页 
 292   1        for(i=6; i<12;i++) 
 293   1        {
 294   2          LCD_write_byte(shuzi_nokia[c*12+i],1);
 295   2        }   
 296   1      }
 297          /*---------------------------------------------
 298          LCD_write_hanzi: 显示12（宽）*16（高）点阵列汉字等半角类
 299          输入参数：c：显示的字符；
 300          编写日期：20080918 
 301          -----------------------------------------------*/
 302          void LCD_write_hanzi(unsigned char row, unsigned char page,unsigned char c) //row:列 page:页 dd:字符
C51 COMPILER V9.59.0.0   5110_51                                                           06/27/2024 13:24:14 PAGE 6   

 303          {
 304   1        unsigned char i;    
 305   1        
 306   1        LCD_set_XY(row*6, page);// 列，页 
 307   1        for(i=0; i<12;i++) 
 308   1        {
 309   2          LCD_write_byte(hanzi[c*24+i],1); 
 310   2        }
 311   1        
 312   1          LCD_set_XY(row*6, page+1);// 列，页 
 313   1        for(i=12; i<24;i++) 
 314   1        {
 315   2          LCD_write_byte(hanzi[c*24+i],1);
 316   2        } 
 317   1      }
 318          
 319          void display_type()//寻到卡后显示出该卡的类型
 320          {
 321   1          unsigned char first,second;
 322   1          LCD_clear(); //清屏幕       
 323   1          LCD_write_hanzi(0,0,19);    
 324   1        LCD_write_hanzi(2,0,20);  
 325   1        LCD_write_hanzi(4,0,21);    
 326   1        LCD_write_hanzi(6,0,22);
 327   1      
 328   1          first=(g_ucTempbuf[0]&0xf0)>>4;
 329   1        LCD_write_shu(8,0,first);//写数字
 330   1          second=g_ucTempbuf[0]&0x0f;
 331   1        LCD_write_shu(9,0,second);//写数字
 332   1          first=(g_ucTempbuf[1]&0xf0)>>4;
 333   1        LCD_write_shu(10,0,first);//写数字
 334   1          second=g_ucTempbuf[1]&0x0f;
 335   1        LCD_write_shu(11,0,second);//写数字
 336   1      }
 337          
 338          
 339          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    451    ----
   CONSTANT SIZE    =   1296    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
