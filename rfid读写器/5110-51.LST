C51 COMPILER V9.59.0.0   5110_51                                                           06/19/2024 00:49:17 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE 5110_51
OBJECT MODULE PLACED IN ..\..\hex\5110-51.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE 5110-51.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2) OBJE
                    -CT(..\..\hex\5110-51.obj)

line level    source

   1          #include <reg51.h>
   2          #include <nokia5110.h>
   3          #include "intrins.h"
   4          extern unsigned char g_ucTempbuf[20]; 
   5          unsigned char code shuzi_nokia[]={
   6          0xF8,0x04,0x04,0x04,0xF8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"0",0*/
   7          
   8          0x00,0x08,0xFC,0x00,0x00,0x00,0x00,0x02,0x03,0x02,0x00,0x00,/*"1",1*/
   9          
  10          0x18,0x84,0x44,0x24,0x18,0x00,0x03,0x02,0x02,0x02,0x02,0x00,/*"2",2*/
  11          
  12          0x08,0x04,0x24,0x24,0xD8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"3",3*/
  13          
  14          0xC0,0xA0,0x98,0xFC,0x80,0x00,0x00,0x00,0x02,0x03,0x02,0x00,/*"4",4*/
  15          
  16          0x7C,0x24,0x24,0x24,0xC4,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"5",5*/
  17          
  18          0xF0,0x48,0x24,0x24,0xC8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"6",6*/
  19          
  20          0x00,0x04,0xC4,0x34,0x0C,0x00,0x00,0x00,0x03,0x00,0x00,0x00,/*"7",7*/
  21          
  22          0xD8,0x24,0x24,0x24,0xD8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"8",8*/
  23          
  24          0x38,0x44,0x44,0x24,0xF8,0x00,0x01,0x02,0x02,0x01,0x00,0x00,/*"9",9*/
  25          
  26          0x00,0xE0,0x9C,0xF0,0x80,0x00,0x02,0x03,0x00,0x00,0x03,0x02,/*"A",10*/
  27          
  28          0x04,0xFC,0x24,0x24,0xD8,0x00,0x02,0x03,0x02,0x02,0x01,0x00,/*"B",11*/
  29          
  30          0xF8,0x04,0x04,0x04,0x0C,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"C",12*/
  31          
  32          0x04,0xFC,0x04,0x04,0xF8,0x00,0x02,0x03,0x02,0x02,0x01,0x00,/*"D",13*/
  33          
  34          0x04,0xFC,0x24,0x74,0x0C,0x00,0x02,0x03,0x02,0x02,0x03,0x00,/*"E",14*/
  35          
  36          0x04,0xFC,0x24,0x74,0x0C,0x00,0x02,0x03,0x02,0x00,0x00,0x00,/*"F",15*/
  37          
  38          0xF0,0x08,0x04,0x44,0xCC,0x40,0x00,0x01,0x02,0x02,0x01,0x00,/*"G",16*/
  39          
  40          0x04,0xFC,0x20,0x20,0xFC,0x04,0x02,0x03,0x00,0x00,0x03,0x02,/*"H",17*/
  41          
  42          0x04,0x04,0xFC,0x04,0x04,0x00,0x02,0x02,0x03,0x02,0x02,0x00,/*"I",18*/
  43          
  44          0x00,0x04,0x04,0xFC,0x04,0x04,0x0C,0x08,0x08,0x07,0x00,0x00,/*"J",19*/
  45          
  46          0x04,0xFC,0x24,0x50,0x8C,0x04,0x02,0x03,0x02,0x00,0x03,0x02,/*"K",20*/
  47          
  48          0x04,0xFC,0x04,0x00,0x00,0x00,0x02,0x03,0x02,0x02,0x02,0x03,/*"L",21*/
  49          
  50          0xFC,0x3C,0xC0,0x3C,0xFC,0x04,0x03,0x00,0x03,0x00,0x03,0x02,/*"M",22*/
  51          
  52          0x04,0xFC,0x30,0xC4,0xFC,0x04,0x02,0x03,0x02,0x00,0x03,0x00,/*"N",23*/
  53          
  54          0xF8,0x04,0x04,0x04,0xF8,0x00,0x01,0x02,0x02,0x02,0x01,0x00,/*"O",24*/
C51 COMPILER V9.59.0.0   5110_51                                                           06/19/2024 00:49:17 PAGE 2   

  55          
  56          0x04,0xFC,0x24,0x24,0x18,0x00,0x02,0x03,0x02,0x00,0x00,0x00,/*"P",25*/
  57          
  58          0xF8,0x84,0x84,0x04,0xF8,0x00,0x01,0x02,0x02,0x07,0x05,0x00,/*"Q",26*/
  59          
  60          0x04,0xFC,0x24,0x64,0x98,0x00,0x02,0x03,0x02,0x00,0x03,0x02,/*"R",27*/
  61          
  62          0x18,0x24,0x24,0x44,0x8C,0x00,0x03,0x02,0x02,0x02,0x01,0x00,/*"S",28*/
  63          
  64          0x0C,0x04,0xFC,0x04,0x0C,0x00,0x00,0x02,0x03,0x02,0x00,0x00,/*"T",29*/
  65          
  66          0x04,0xFC,0x00,0x00,0xFC,0x04,0x00,0x01,0x02,0x02,0x01,0x00,/*"U",30*/
  67          
  68          0x04,0x7C,0x80,0xE0,0x1C,0x04,0x00,0x00,0x03,0x00,0x00,0x00,/*"V",31*/
  69          
  70          0x3C,0xC0,0x7C,0xC0,0x3C,0x00,0x00,0x03,0x00,0x03,0x00,0x00,/*"W",32*/
  71          
  72          0x04,0x9C,0x60,0x9C,0x04,0x00,0x02,0x03,0x00,0x03,0x02,0x00,/*"X",33*/
  73          
  74          0x04,0x3C,0xC0,0x3C,0x04,0x00,0x00,0x02,0x03,0x02,0x00,0x00,/*"Y",34*/
  75          
  76          0x0C,0x84,0x64,0x1C,0x04,0x00,0x02,0x03,0x02,0x02,0x03,0x00,/*"Z",35*/
  77          
  78          0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x00,0x00,/*":",36*/
  79          
  80          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*" ",37*/
  81          
  82          };
  83          
  84          
  85          
  86          unsigned char code hanzi[]={
  87          
  88          
  89          0x10,0x14,0x94,0xD4,0x7F,0x54,0x5C,0x54,0x52,0x50,0x10,0x00,
  90          0x02,0x01,0x00,0x01,0x01,0x01,0x01,0x09,0x09,0x07,0x00,0x00,/*"考",0*/
  91          
  92          0xE2,0xAF,0xFA,0xAF,0xE2,0x00,0x08,0xFF,0x08,0x08,0xF8,0x00,
  93          0x0A,0x0A,0x0F,0x0A,0x0A,0x08,0x06,0x01,0x08,0x08,0x07,0x00,/*"勤",1*/
  94          
  95          0x00,0x82,0x92,0xDA,0xD6,0xB2,0xB1,0x91,0x89,0xC1,0x80,0x00,
  96          0x08,0x04,0x02,0x00,0x08,0x0F,0x00,0x00,0x02,0x04,0x09,0x00,/*"系",2*/
  97          
  98          0x98,0xD4,0xB3,0x88,0x00,0x64,0xD4,0x4D,0xC6,0x54,0xE4,0x00,
  99          0x04,0x04,0x02,0x02,0x08,0x04,0x03,0x00,0x07,0x08,0x0C,0x00,/*"统",3*/
 100          
 101          0x88,0x88,0xFF,0x48,0x48,0x02,0x02,0x02,0xFE,0x02,0x02,0x00,
 102          0x00,0x08,0x0F,0x00,0x00,0x00,0x08,0x08,0x0F,0x00,0x00,0x00,/*"打",4*/
 103          
 104          0x20,0x20,0x20,0x20,0xFF,0xA4,0xA4,0x24,0x24,0x24,0x20,0x00,
 105          0x00,0x00,0x00,0x00,0x0F,0x00,0x00,0x01,0x01,0x02,0x00,0x00,/*"卡",5*/
 106          
 107          0x00,0xFC,0x24,0x24,0xE4,0x04,0xFF,0x04,0x85,0x66,0x04,0x00,
 108          0x08,0x07,0x00,0x02,0x0B,0x04,0x02,0x01,0x02,0x04,0x0F,0x00,/*"成",6*/
 109          
 110          0x04,0x04,0xFC,0x04,0x04,0x08,0xFF,0x08,0x08,0x08,0xF8,0x00,
 111          0x02,0x02,0x01,0x09,0x05,0x03,0x00,0x00,0x08,0x08,0x07,0x00,/*"功",7*/
 112          
 113          0x8C,0x85,0x96,0x94,0x95,0x96,0xD4,0xB4,0x96,0x85,0x8C,0x00,
 114          0x00,0x00,0x00,0x08,0x08,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,/*"学",8*/
 115          
 116          0x20,0x20,0xAF,0x69,0x29,0x29,0x29,0x29,0x2F,0x20,0x20,0x00,
C51 COMPILER V9.59.0.0   5110_51                                                           06/19/2024 00:49:17 PAGE 3   

 117          0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x09,0x09,0x07,0x00,0x00,/*"号",9*/
 118          
 119          0xDC,0xB3,0x88,0x00,0x24,0xFF,0x24,0x00,0xFE,0x32,0xCE,0x00,
 120          0x04,0x04,0x02,0x08,0x05,0x03,0x01,0x00,0x0F,0x02,0x01,0x00,/*"绑",10*/
 121          
 122          0x2C,0x24,0xA4,0x24,0x25,0xE6,0x24,0x24,0x24,0x24,0x2C,0x00,
 123          0x08,0x04,0x03,0x04,0x08,0x0F,0x09,0x09,0x09,0x09,0x08,0x00,/*"定",11*/
 124          
 125          };
 126          
 127          void delayms(unsigned  int ii)//1ms延时函数
 128          {
 129   1        unsigned int i,x;
 130   1        for (x=0;x<ii;x++)
 131   1        {
 132   2        for (i=0;i<200;i++);
 133   2        }
 134   1      ;
 135   1      }
 136          
 137          /*--------------------------------------------
 138          LCD_write_byte: 使用SPI接口写数据到LCD
 139          输入参数：dt：写入的数据；
 140          command ：写数据/命令选择；
 141          编写日期：20080918 
 142          ----------------------------------------------*/
 143          void LCD_write_byte(unsigned char dt, unsigned char command)
 144          {
 145   1        unsigned char i; 
 146   1        sce=0;  
 147   1        dc=command; 
 148   1        for(i=0;i<8;i++)
 149   1        { 
 150   2          if(dt&0x80)
 151   2          sdin=1; 
 152   2          else
 153   2            sdin=0;
 154   2          dt=dt<<1;   
 155   2          sclk=0;     
 156   2          sclk=1; 
 157   2        } 
 158   1        dc=1; 
 159   1        sce=1;  
 160   1        sdin=1;
 161   1      }
 162          /*---------------------------------------
 163          LCD_init: 3310LCD初始化
 164          编写日期：20080918 
 165          -----------------------------------------  */
 166          void LCD_init(void)
 167          {
 168   1        res=0;    
 169   1          delayms(10);
 170   1          res=1;  
 171   1        LCD_write_byte(0x21,0);//初始化Lcd,功能设定使用扩充指令
 172   1        LCD_write_byte(0xCD,0);//设定液晶偏置电压
 173   1        LCD_write_byte(0x20,0);//使用基本指令
 174   1        LCD_write_byte(0x0C,0);//设定显示模式，正常显示,普通显示
 175   1      }
 176          /*-------------------------------------------
 177          LCD_set_XY: 设置LCD坐标函数
 178          输入参数：X：0－83  Y：0－5
C51 COMPILER V9.59.0.0   5110_51                                                           06/19/2024 00:49:17 PAGE 4   

 179          编写日期：20080918 
 180          ---------------------------------------------*/
 181          void LCD_set_XY(unsigned char X, unsigned char Y)
 182          {
 183   1        LCD_write_byte(0x40 | Y, 0);// column设置y地址命令字
 184   1        LCD_write_byte(0x80 | X, 0);// row设置x地址命令字
 185   1      } 
 186          /*------------------------------------------
 187          LCD_clear: LCD清屏函数
 188          编写日期：20080918 
 189          --------------------------------------------*/
 190          void LCD_clear(void)
 191          {
 192   1        unsigned char t;
 193   1        unsigned char k;
 194   1        LCD_set_XY(0,0);
 195   1        for(t=0;t<6;t++)
 196   1        { 
 197   2          for(k=0;k<84;k++)
 198   2          { 
 199   3            LCD_write_byte(0x00,1);
 200   3              
 201   3          } 
 202   2        }
 203   1      }
 204          /*---------------------------------------------
 205          LCD_write_shu: 显示6（宽）*16（高）点阵列数字字母符号等半角类
 206          输入参数：c：显示的字符；
 207          编写日期：20080918 
 208          -----------------------------------------------*/
 209          void LCD_write_shu(unsigned char row, unsigned char page,unsigned char c) //row:列 page:页 dd:字符
 210          {
 211   1        unsigned char i;    
 212   1        
 213   1        LCD_set_XY(row*6, page);// 列，页 
 214   1        for(i=0; i<6;i++) 
 215   1        {
 216   2          LCD_write_byte(shuzi_nokia[c*12+i],1); 
 217   2        }
 218   1        
 219   1          LCD_set_XY(row*6, page+1);// 列，页 
 220   1        for(i=6; i<12;i++) 
 221   1        {
 222   2          LCD_write_byte(shuzi_nokia[c*12+i],1);
 223   2        }   
 224   1      }
 225          /*---------------------------------------------
 226          LCD_write_hanzi: 显示12（宽）*16（高）点阵列汉字等半角类
 227          输入参数：c：显示的字符；
 228          编写日期：20080918 
 229          -----------------------------------------------*/
 230          void LCD_write_hanzi(unsigned char row, unsigned char page,unsigned char c) //row:列 page:页 dd:字符
 231          {
 232   1        unsigned char i;    
 233   1        
 234   1        LCD_set_XY(row*6, page);// 列，页 
 235   1        for(i=0; i<12;i++) 
 236   1        {
 237   2          LCD_write_byte(hanzi[c*24+i],1); 
 238   2        }
 239   1        
 240   1          LCD_set_XY(row*6, page+1);// 列，页 
C51 COMPILER V9.59.0.0   5110_51                                                           06/19/2024 00:49:17 PAGE 5   

 241   1        for(i=12; i<24;i++) 
 242   1        {
 243   2          LCD_write_byte(hanzi[c*24+i],1);
 244   2        } 
 245   1      }
 246          
 247          void display_type()//寻到卡后显示出该卡的类型
 248          {
 249   1          unsigned char first,second;
 250   1          LCD_clear(); //清屏幕       
 251   1          LCD_write_hanzi(0,0,19);    
 252   1        LCD_write_hanzi(2,0,20);  
 253   1        LCD_write_hanzi(4,0,21);    
 254   1        LCD_write_hanzi(6,0,22);
 255   1      
 256   1          first=(g_ucTempbuf[0]&0xf0)>>4;
 257   1        LCD_write_shu(8,0,first);//写数字
 258   1          second=g_ucTempbuf[0]&0x0f;
 259   1        LCD_write_shu(9,0,second);//写数字
 260   1          first=(g_ucTempbuf[1]&0xf0)>>4;
 261   1        LCD_write_shu(10,0,first);//写数字
 262   1          second=g_ucTempbuf[1]&0x0f;
 263   1        LCD_write_shu(11,0,second);//写数字
 264   1      }
 265          
 266          
 267          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    451    ----
   CONSTANT SIZE    =    744    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
